<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Itâ€™s Me + Hmmmmmm â€” Combined Surprise</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:#ff4f8b;
    --accent-dark:#c92f47;
    --muted:#666;
    --card:#fff;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:#111;font-family:"Poppins",system-ui,Arial;color:#111}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:22px}
  .card{width:100%;max-width:980px;border-radius:16px;overflow:hidden;background:var(--card);box-shadow:0 30px 80px rgba(0,0,0,0.35)}
  header{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;background:linear-gradient(90deg,rgba(255,255,255,0.98),rgba(255,255,255,0.96));border-bottom:1px solid rgba(0,0,0,0.05)}
  .brand{font-weight:700;color:var(--accent-dark)}
  .hint{font-size:13px;color:var(--muted);display:flex;align-items:center;gap:10px}
  .musicBtn{background:transparent;border:2px solid rgba(201,47,71,0.12);color:var(--accent);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
  main.stage{min-height:640px;padding:30px;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:background 700ms ease,color 400ms}
  #viewport{width:100%;max-width:880px;height:360px;position:relative;overflow:hidden;border-radius:14px}
  .slide{position:absolute;inset:0;padding:28px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;transition:transform 520ms cubic-bezier(.2,.9,.2,1),opacity 420ms}
  .slide.hidden{opacity:0;pointer-events:none}
  .slide-left{transform:translateX(-120%);opacity:0}
  .slide-right{transform:translateX(120%);opacity:0}
  .slide-center{transform:translateX(0);opacity:1}
  #titleText{font-size:1.6rem;line-height:1.35;margin-bottom:10px}
  #subText{font-size:1rem;color:var(--muted);max-width:86%;margin-top:6px}
  .controls{margin-top:18px}
  .btn{background:var(--accent);color:#fff;border:0;padding:12px 26px;border-radius:999px;font-weight:700;cursor:pointer;box-shadow:0 10px 26px rgba(255,79,140,0.14)}
  .btn.secondary{background:transparent;border:2px solid rgba(201,47,71,0.12);color:var(--accent)}
  #count{font-size:3rem;font-weight:800;color:var(--accent);margin-top:12px;display:none}
  #emojiLayer{position:absolute;inset:0;pointer-events:none;overflow:hidden}
  .emoji{position:absolute;font-size:28px;opacity:.95;animation:floatUp linear infinite}
  @keyframes floatUp{from{transform:translateY(40vh) scale(.92);opacity:1} to{transform:translateY(-30vh) scale(1.05);opacity:0}}
  .confetti{position:absolute;inset:0;pointer-events:none}
  footer{padding:14px;text-align:center;font-size:0.95rem;color:#666}
  @media (max-width:720px){#viewport{height:520px}.slide{padding:18px} #titleText{font-size:1.15rem}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-label="Combined surprise">
      <header>
        <div class="brand">Itâ€™s Me â€” A Little Surprise</div>
        <div class="hint">
          <button id="musicToggle" class="musicBtn" aria-pressed="false">Enable Music</button>
          <span style="font-size:13px;color:var(--muted)">Click Next to advance â€” music will start on first click</span>
        </div>
      </header>

      <main class="stage" id="stage" style="background:linear-gradient(120deg,#fff8fb,#fffaf2);color:#111">
        <div id="viewport" aria-live="polite">
          <!-- slides injected here -->
        </div>

        <div id="emojiLayer" aria-hidden="true"></div>
        <div id="count" role="status" aria-live="polite"></div>

        <div class="controls">
          <button id="nextBtn" class="btn">Next âžœ</button>
        </div>
      </main>

      <footer>Made with â™¥ â€” publish to GitHub Pages and share the link</footer>
    </div>
  </div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
  /* ============================
     Slides content (ITS-ME first, then HMMMMMM)
     Each slide: {title, sub, bg (css), color, special}
     special: 'count1','count2','final' etc
     ============================ */

  const slides = [
    // IT'S ME / intro
    {title:"ðŸ‘‹ Hi â€” it's me.", sub:"Just wanted to say hello before anything else.", bg:"linear-gradient(120deg,#fef6ff,#ffeef2)", color:"#222"},
    {title:"ðŸ˜Š Hello â€” how are you today?", sub:"I heard something special is happening...", bg:"linear-gradient(120deg,#fff7e6,#ffe3d3)", color:"#222"},
    {title:"ðŸŽ‚ Is it your birthday? I couldn't let the day pass without doing something small.", sub:"Please focus â€” this is for you only.", bg:"linear-gradient(120deg,#f3e8ff,#fbe6ff)", color:"#222"},
    {title:"ðŸŒ™ I know we can't meet at 12:00 â€” so I made this little thing to make you smile.", sub:"I've been working on it for weeks ðŸ’Œ", bg:"linear-gradient(120deg,#e6fff7,#d6fbff)", color:"#222"},
    {title:"âœ¨ Ready for a tiny countdown before some fun?", sub:"(It will start automatically)", bg:"linear-gradient(120deg,#fffaf0,#fff1f5)", color:"#222", special:"count1"},

    // HMMMMMM - funny/romantic jokes (10)
    {title:"ðŸ˜œ You know whatâ€™s funny? I tried to ignore youâ€¦ but my thoughts refused to cooperate.", bg:"linear-gradient(120deg,#ffd2e2,#ffeedd)", color:"#222"},
    {title:"ðŸ˜‰ Every time you smile, I forget what I was about to say.", bg:"linear-gradient(120deg,#ffd6a5,#fceabb)", color:"#222"},
    {title:"ðŸ˜‚ I had a pickup line... but you already picked up my heart.", bg:"linear-gradient(120deg,#b8c6ff,#f6f0ff)", color:"#222"},
    {title:"ðŸ¥° I donâ€™t need Wi-Fi â€” your presence gives me full connection.", bg:"linear-gradient(120deg,#fff1f0,#ffe6ee)", color:"#222"},
    {title:"ðŸ¤­ I tried to find someone better than you â€” Google returned no results.", bg:"linear-gradient(120deg,#eaffd0,#fff7d6)", color:"#222"},
    {title:"ðŸ™ˆ You're my favorite song â€” stuck in my head all day.", bg:"linear-gradient(120deg,#ffdede,#ffeedd)", color:"#222"},
    {title:"ðŸ˜… You should have a warning: Highly addictive. Handle with care!", bg:"linear-gradient(120deg,#dfe9ff,#f2f7ff)", color:"#222"},
    {title:"ðŸ’˜ My phone battery lasts longer than my ability to stay mad at you.", bg:"linear-gradient(120deg,#ffe2f0,#fff7f3)", color:"#222"},
    {title:"ðŸ¤£ You make me smile at my screen like a fool â€” worth every second.", bg:"linear-gradient(120deg,#f8ffd1,#eaf7dd)", color:"#222"},
    {title:"ðŸ’ž If loving you was a subject, I'd book extra classes.", bg:"linear-gradient(120deg,#f4e7ff,#fff1ff)", color:"#222", special:"count2"},

    // (end of HMMMMMM) -> now optionally could continue other parts; here we stop after merged content
    // Add an ending slide linking back to main site / or to minahil-birthday etc.
    {title:"ðŸŽ‰ That was round of little jokes & teasing!", sub:"Hope that made you smile â€” want a final surprise?", bg:"linear-gradient(120deg,#fff0f5,#ffeef6)", color:"#222"},
    {title:"â£ï¸ Final little surprise is ready â€” click to open", sub:"(Or wait for the countdown)", bg:"linear-gradient(120deg,#fff7e6,#fff1d9)", color:"#222", special:"final" }
  ];

  /* ============== DOM refs ============== */
  const viewport = document.getElementById('viewport');
  const nextBtn = document.getElementById('nextBtn');
  const countBox = document.getElementById('count');
  const emojiLayer = document.getElementById('emojiLayer');
  const musicToggle = document.getElementById('musicToggle');

  /* create slides in DOM */
  const domSlides = [];
  slides.forEach((s, i) => {
    const el = document.createElement('div');
    el.className = 'slide slide-right hidden';
    el.style.background = s.bg || '#fff';
    el.style.color = s.color || '#111';
    el.innerHTML = `<div id="titleText">${s.title || ''}</div><div id="subText">${s.sub || ''}</div>`;
    // initial position: right offscreen
    viewport.appendChild(el);
    domSlides.push(el);
  });

  let idx = 0;
  // helper to place slide positions
  function setSlideClass(el, cls){
    el.classList.remove('slide-left','slide-right','slide-center','hidden');
    if(cls) el.classList.add(cls);
  }

  // slide-in animation: current -> left, next from right -> center
  function showSlide(toIndex, direction='next'){
    // hide previous
    domSlides.forEach((d, i) => {
      d.classList.add('hidden');
      d.classList.remove('slide-left','slide-right','slide-center');
    });
    const target = domSlides[toIndex];
    // set starting position depending on direction
    if(direction === 'next'){
      setSlideClass(target,'slide-right');
      // force reflow
      void target.offsetWidth;
      // bring center
      target.classList.remove('hidden');
      setSlideClass(target,'slide-center');
    } else {
      setSlideClass(target,'slide-left');
      void target.offsetWidth;
      target.classList.remove('hidden');
      setSlideClass(target,'slide-center');
    }

    // update background & color for container stage
    const s = slides[toIndex];
    const stage = document.querySelector('.stage');
    stage.style.background = s.bg || stage.style.background;
    stage.style.color = s.color || stage.style.color;

    // handle specials
    countBox.style.display = 'none';
    nextBtn.style.display = 'inline-block';
    if(s.special === 'count1'){
      nextBtn.style.display = 'none';
      runCountdown(5, ()=> { idx++; showSlide(idx,'next'); });
    } else if(s.special === 'count2'){
      nextBtn.style.display = 'none';
      runCountdown(5, ()=> { idx++; showSlide(idx,'next'); });
    } else if(s.special === 'final'){
      // final: show countdown and then link to hmmmmmm page (or open automatically)
      nextBtn.style.display = 'none';
      runFinalCountdown(8, ()=> {
        // open hmmmmmm repo in same window
        window.location.href = 'https://tmehmoodmscs24seecs-ops.github.io/hmmmmmm/';
      });
    }
  }

  // initialize first slide
  showSlide(0,'next');

  // next button handler
  nextBtn.addEventListener('click', ()=>{
    // start music on first user interaction
    enableMusicOnInteraction();

    idx++;
    if(idx < slides.length){
      showSlide(idx,'next');
    } else {
      // fallback
      window.location.href = 'https://tmehmoodmscs24seecs-ops.github.io/hmmmmmm/';
    }
  });

  // keyboard navigation
  window.addEventListener('keydown', (e) => {
    if(e.key === 'ArrowRight' || e.key === 'Enter') nextBtn.click();
    if(e.key === 'ArrowLeft' && idx>0){
      idx--;
      showSlide(idx,'prev');
    }
  });

  /* ========== countdowns ========== */
  let countdownHandle = null;
  function runCountdown(seconds, cb){
    countBox.style.display = 'block';
    countBox.textContent = seconds;
    let s = seconds;
    countdownHandle = setInterval(()=>{
      s--;
      countBox.textContent = s;
      if(s <= 0){
        clearInterval(countdownHandle);
        countBox.style.display = 'none';
        cb();
      }
    },1000);
  }
  function runFinalCountdown(seconds, cb){
    countBox.style.display = 'block';
    countBox.textContent = seconds;
    let s = seconds;
    countdownHandle = setInterval(()=>{
      s--;
      countBox.textContent = s;
      if(s <= 0){
        clearInterval(countdownHandle);
        countBox.style.display = 'none';
        cb();
      }
    },1000);
  }

  /* ========== emoji floating ========== */
  const EMOJI_POOL = ["ðŸ’–","ðŸ˜‚","ðŸ˜˜","ðŸ’•","ðŸ’ž","ðŸŒ¸","ðŸ˜","ðŸ˜…","ðŸŽˆ","ðŸŒŸ"];
  function spawnEmoji(){
    const e = document.createElement('div');
    e.className = 'emoji';
    e.style.left = (5 + Math.random()*90) + '%';
    e.style.bottom = (5 + Math.random()*20) + 'vh';
    e.style.fontSize = (18 + Math.random()*28) + 'px';
    e.style.animationDuration = (4 + Math.random()*5) + 's';
    e.textContent = EMOJI_POOL[Math.floor(Math.random()*EMOJI_POOL.length)];
    emojiLayer.appendChild(e);
    setTimeout(()=> e.remove(), 9000);
  }
  const emojiTimer = setInterval(spawnEmoji, 380);

  /* ========== YouTube music (muted autoplay then unmute on interaction) ========== */
  let ytPlayer = null, musicStarted = false;
  const YT_ID = 'Umqb9KENgmk'; // your chosen video id

  function createYT(){
    if(ytPlayer) return;
    const wr = document.createElement('div');
    wr.id = 'yt_hidden';
    wr.style.position='fixed'; wr.style.left='-9999px'; wr.style.width='1px'; wr.style.height='1px';
    document.body.appendChild(wr);

    ytPlayer = new YT.Player(wr, {
      height:'1', width:'1',
      videoId: YT_ID,
      playerVars: {
        autoplay:1, controls:0, loop:1, playlist:YT_ID, modestbranding:1, rel:0, playsinline:1, mute:1
      },
      events:{
        onReady: (e)=> { e.target.mute(); e.target.setVolume(20); e.target.playVideo(); }
      }
    });
  }

  function enableMusicOnInteraction(){
    if(musicStarted) return;
    musicStarted = true;
    // attempt to create player
    if(typeof YT === 'undefined' || !YT.Player) {
      // API may not have loaded yet: try creating anyway (onYouTubeIframeAPIReady will exist)
      createYT();
    } else {
      createYT();
    }
    // unmute after small delay (user-initiated)
    setTimeout(() => {
      try{ if(ytPlayer && ytPlayer.unMute) { ytPlayer.unMute(); ytPlayer.setVolume(24); } }catch(e){}
    }, 400);
    musicToggle.textContent = 'Music ON';
    musicToggle.setAttribute('aria-pressed','true');
  }

  // music toggle button: explicit user control
  musicToggle.addEventListener('click', () => {
    enableMusicOnInteraction();
  });

  // ensure YouTube API callback exists
  function onYouTubeIframeAPIReady(){ /* we create player lazily on interaction */ }

  /* cleanup */
  window.addEventListener('beforeunload', ()=>{
    try{ if(ytPlayer && ytPlayer.destroy) ytPlayer.destroy(); }catch(e){}
    clearInterval(emojiTimer);
  });
  </script>
</body>
</html>
