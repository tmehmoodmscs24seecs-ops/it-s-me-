<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>A Very Special Surprise</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --btn: #ff4f8b;
    --btn-hover: #ff6aa6;
  }
  html,body{height:100%;margin:0;background:#111;font-family:"Poppins",system-ui,Arial;}
  body{display:flex;align-items:center;justify-content:center;padding:20px;color:#111}
  .card{
    width:100%;max-width:900px;border-radius:18px;overflow:hidden;background:linear-gradient(180deg,#fff 0%, #fff 0%);box-shadow:0 30px 80px rgba(0,0,0,0.45);
  }
  header{
    display:flex;align-items:center;justify-content:space-between;padding:18px 24px;background:linear-gradient(90deg,rgba(255,255,255,0.97),rgba(255,255,255,0.95));
    border-bottom:1px solid rgba(0,0,0,0.05);
  }
  .brand{font-weight:700;color:#b71c3a}
  .controls { display:flex; gap:12px; align-items:center; }
  .music-btn{
    background:transparent;border:2px solid rgba(183,28,58,0.12);color:var(--btn);padding:8px 12px;border-radius:12px;cursor:pointer;font-weight:600;
  }
  main.stage{
    min-height:560px;padding:34px;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;
    transition:background 700ms ease, color 500ms;
  }
  #slideText{max-width:860px;text-align:center;font-size:1.35rem;line-height:1.4;margin-bottom:18px}
  .nextBtn{background:var(--btn);color:#fff;border:none;padding:14px 28px;border-radius:999px;font-weight:700;cursor:pointer;box-shadow:0 10px 30px rgba(255,79,140,0.16)}
  .nextBtn:disabled{opacity:.5;cursor:not-allowed}
  #emojiLayer{position:absolute;inset:0;pointer-events:none;overflow:hidden}
  .emoji { position:absolute;font-size:28px;opacity:0.95; animation:floatUp linear infinite; }
  @keyframes floatUp {
    from{ transform: translateY(40vh) scale(0.9); opacity:1;}
    to{ transform: translateY(-30vh) scale(1.05); opacity:0;}
  }
  .countBox{font-size:2.4rem;font-weight:800;color:var(--btn); margin-top:12px}
  .mini { font-size:0.95rem;color:rgba(0,0,0,0.6); margin-top:10px; }
  footer{display:flex;align-items:center;justify-content:center;padding:18px;background:linear-gradient(180deg,rgba(0,0,0,0.02),transparent)}
  .smallLink{color:#444;font-size:0.95rem}
  /* responsive */
  @media (max-width:640px){
    #slideText{font-size:1.05rem;padding:0 12px}
    .emoji{font-size:22px}
    .countBox{font-size:2rem}
  }
</style>
</head>
<body>

<div class="card" role="application" aria-label="Surprise slideshow">
  <header>
    <div class="brand">A small surprise — just for her</div>
    <div class="controls">
      <button id="musicToggle" class="music-btn" aria-pressed="false">Play Music</button>
      <div class="mini">Tip: Tap to enable sound (required on mobile)</div>
    </div>
  </header>

  <main id="stage" class="stage" style="background:linear-gradient(120deg,#fef3f6,#fff8f9);color:#222">
    <div id="emojiLayer"></div>
    <div id="slideText" aria-live="polite"></div>
    <div id="extraArea" class="mini"></div>
    <div id="countIndicator" class="countBox" style="display:none"></div>
    <div style="margin-top:18px">
      <button id="nextBtn" class="nextBtn">Next ➜</button>
    </div>
  </main>

  <footer>
    <div class="smallLink">Made with ♥ — one click away from a bigger surprise</div>
  </footer>
</div>

<!-- YouTube API -->
<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* -------------------------
  Slides data structure
   - text: main text for slide
   - bg: background CSS
   - color: text color
   - special: "count1" / "count2" / "count3" for countdowns
------------------------- */
const slides = [
  // Intro warmups (7)
  {text:"👋 Hi, love — hey there!", bg:"linear-gradient(120deg,#fef6ff,#ffeef2)", color:"#222"},
  {text:"😊 Hello — how are you? I heard today is your birthday 🎂", bg:"linear-gradient(120deg,#fff7e6,#ffe3d3)", color:"#222"},
  {text:"💌 I know we can't meet at midnight, so I made this little thing just for you.", bg:"linear-gradient(120deg,#f3e8ff,#fbe6ff)", color:"#222"},
  {text:"🌙 I've been working on this for weeks — a small effort to make you feel special.", bg:"linear-gradient(120deg,#e6fff7,#d6fbff)", color:"#222"},
  {text:"✨ Focus for a minute—this is for you only.", bg:"linear-gradient(120deg,#fff0f3,#fff6e6)", color:"#222"},
  {text:"🛠️ I hope this little surprise brings a big smile to your face 😊", bg:"linear-gradient(120deg,#ffefe6,#ffe6f0)", color:"#222"},
  {text:"⏳ Ready? A tiny countdown will lead to some silly and sweet moments...", bg:"linear-gradient(120deg,#e8f6ff,#eef7ff)", color:"#222", special:"count1"},

  // Romantic-funny set (10 teaser jokes)
  {text:"😜 You know what’s funny? I tried to ignore you... but my thoughts refused to cooperate.", bg:"linear-gradient(120deg,#ffd2e2,#ffeedd)", color:"#222"},
  {text:"😉 When you smile, I forget what I was going to say. Every. Single. Time.", bg:"linear-gradient(120deg,#ffd6a5,#fceabb)", color:"#222"},
  {text:"😂 I was going to send a pickup line... but you already picked up my heart.", bg:"linear-gradient(120deg,#b8c6ff,#f6f0ff)", color:"#222"},
  {text:"🥰 I don’t need Wi-Fi — your presence gives me full connection.", bg:"linear-gradient(120deg,#fff1f0,#ffe6ee)", color:"#222"},
  {text:"🤭 I tried to find someone better than you... Google returned no results.", bg:"linear-gradient(120deg,#eaffd0,#fff7d6)", color:"#222"},
  {text:"🙈 You’re like my favorite song — stuck in my head all day!", bg:"linear-gradient(120deg,#ffdede,#ffeedd)", color:"#222"},
  {text:"😅 You should come with a warning: Highly addictive — handle with care!", bg:"linear-gradient(120deg,#dfe9ff,#f2f7ff)", color:"#222"},
  {text:"💘 My phone battery lasts longer than my ability to stay mad at you.", bg:"linear-gradient(120deg,#ffe2f0,#fff7f3)", color:"#222"},
  {text:"🤣 You make me smile at my screen like an idiot — and I love it.", bg:"linear-gradient(120deg,#f8ffd1,#eaf7dd)", color:"#222"},
  {text:"💞 If loving you was a subject, I’d sign up for extra classes.", bg:"linear-gradient(120deg,#f4e7ff,#fff1ff)", color:"#222"},
  // Countdown before Round 1
  {text:"🎁 Ready for round 1? Small countdown coming up...", bg:"linear-gradient(120deg,#111,#444)", color:"#fff", special:"count2"},

  // Round 1: 10 romantic pickup lines
  {text:"🌹 You’re the reason behind my smile every single day.", bg:"linear-gradient(120deg,#fff0f5,#ffeef2)", color:"#222"},
  {text:"🌸 If I had a flower for every time I thought of you, I'd have a garden forever.", bg:"linear-gradient(120deg,#fff7e6,#fff1d9)", color:"#222"},
  {text:"💭 You don't cross my mind — you live in it.", bg:"linear-gradient(120deg,#eef6ff,#eaf7ff)", color:"#222"},
  {text:"✨ Even a dictionary wouldn't have enough words to describe you.", bg:"linear-gradient(120deg,#fff1f7,#fff6e6)", color:"#222"},
  {text:"🌙 You're my favorite place to go when my mind needs peace.", bg:"linear-gradient(120deg,#f0fff4,#eafffb)", color:"#222"},
  {text:"📱 The best part of my day is when your name pops up on my screen.", bg:"linear-gradient(120deg,#fff0f0,#fff9f2)", color:"#222"},
  {text:"✍️ You're the poem I never could write but always feel.", bg:"linear-gradient(120deg,#fce4ff,#f8efff)", color:"#222"},
  {text:"💼 If loving you was a job, I'd still never take a day off.", bg:"linear-gradient(120deg,#fff7de,#fff0d9)", color:"#222"},
  {text:"🌅 Your smile is my favorite view.", bg:"linear-gradient(120deg,#fff1f0,#fffaf2)", color:"#222"},
  {text:"🌌 You’re the dream I never want to wake up from.", bg:"linear-gradient(120deg,#f0eaff,#f8f0ff)", color:"#222"},
  // Countdown before Round 2 (longer)
  {text:"⏳ Round 2 begins soon — a bigger countdown to set the mood...", bg:"linear-gradient(120deg,#111,#333)", color:"#fff", special:"count3"},

  // Round 2: 10 more romantic pickup lines
  {text:"✨ You must be tired — you’ve been running through my dreams too.", bg:"linear-gradient(120deg,#fff0f6,#ffeef6)", color:"#222"},
  {text:"🗺️ Do you have a map? I keep getting lost in your eyes.", bg:"linear-gradient(120deg,#fff4e6,#fff1dc)", color:"#222"},
  {text:"🤝 Your hand looks heavy — can I carry it for you?", bg:"linear-gradient(120deg,#f0fff8,#e8fff4)", color:"#222"},
  {text:"🎵 You're my favorite song — I play you on repeat in my head.", bg:"linear-gradient(120deg,#f9eaff,#fff0ff)", color:"#222"},
  {text:"⏳ If beauty were time, you'd be eternity.", bg:"linear-gradient(120deg,#fff3f0,#fffaf4)", color:"#222"},
  {text:"💓 You make my heart do things it never learned to do.", bg:"linear-gradient(120deg,#fff0f8,#fff5f2)", color:"#222"},
  {text:"☀️ You're my sunshine on a cloudy day.", bg:"linear-gradient(120deg,#fff8e6,#fff3d9)", color:"#222"},
  {text:"🍬 You're so sweet I might get diabetes — ketchup? (Just kidding!)", bg:"linear-gradient(120deg,#ffe8f1,#fff3f8)", color:"#222"},
  {text:"✨ You aren't a genie but you're my wish come true.", bg:"linear-gradient(120deg,#f1f0ff,#eef7ff)", color:"#222"},
  {text:"🧪 Are you made of copper and tellurium? Because you're Cu-Te 😉", bg:"linear-gradient(120deg,#ffeef0,#fff5f6)", color:"#222"},
  // Final countdown + redirect
  {text:"🎉 Final countdown — then the big surprise!", bg:"linear-gradient(120deg,#111,#000)", color:"#fff", special:"finalRedirect"}
];

/* ------------- UI references ------------- */
const stage = document.getElementById('stage');
const slideText = document.getElementById('slideText');
const extraArea = document.getElementById('extraArea');
const nextBtn = document.getElementById('nextBtn');
const countIndicator = document.getElementById('countIndicator');
const emojiLayer = document.getElementById('emojiLayer');

let idx = 0;
let countdownTimer = null;

/* Floating emoji generator (for charm) */
const emojiPool = ["💖","😂","😈","😘","💕","💞","🌸","😍","😅","💘","🎈","🌟"];
function spawnEmoji() {
  const e = document.createElement('div');
  e.className = 'emoji';
  e.style.left = (5 + Math.random()*90) + '%';
  e.style.bottom = (5 + Math.random()*20) + 'vh';
  e.style.fontSize = (18 + Math.random()*30) + 'px';
  e.style.animationDuration = (4 + Math.random()*5) + 's';
  e.textContent = emojiPool[Math.floor(Math.random()*emojiPool.length)];
  emojiLayer.appendChild(e);
  setTimeout(() => e.remove(), 9000);
}
const emojiSpawnInterval = setInterval(spawnEmoji, 350);

/* show a slide */
function renderSlide(i) {
  const s = slides[i];
  stage.style.background = s.bg;
  stage.style.color = s.color || '#111';
  slideText.innerHTML = s.text;
  extraArea.innerHTML = '';
  countIndicator.style.display = 'none';
  nextBtn.style.display = 'inline-block';
  // handle special slides
  if (s.special === "count1") {
    nextBtn.style.display = 'none';
    runSimpleCountdown(5, ()=>{ idx++; renderSlide(idx); });
  } else if (s.special === "count2") {
    nextBtn.style.display = 'none';
    runSimpleCountdown(5, ()=>{ idx++; renderSlide(idx); });
  } else if (s.special === "count3") {
    nextBtn.style.display = 'none';
    runSimpleCountdown(10, ()=>{ idx++; renderSlide(idx); });
  } else if (s.special === "finalRedirect") {
    nextBtn.style.display = 'none';
    runFinalCountdown(10, ()=>{ window.location.href = "https://tmehmoodmscs24seecs-ops.github.io/don-t-open-it/"; });
  }
}

/* simple countdown display (seconds, callback) */
function runSimpleCountdown(seconds, cb) {
  countIndicator.style.display = 'block';
  let sec = seconds;
  countIndicator.textContent = sec;
  countdownTimer = setInterval(()=>{
    sec--;
    countIndicator.textContent = sec;
    if (sec <= 0) {
      clearInterval(countdownTimer);
      countIndicator.style.display = 'none';
      cb();
    }
  }, 1000);
}

/* final countdown with message then callback */
function runFinalCountdown(seconds, cb) {
  countIndicator.style.display = 'block';
  let sec = seconds;
  // show big counter
  countIndicator.style.fontSize = '2.6rem';
  countIndicator.textContent = sec;
  countdownTimer = setInterval(()=>{
    sec--;
    countIndicator.textContent = sec;
    if (sec <= 0) {
      clearInterval(countdownTimer);
      countIndicator.style.display = 'none';
      slideText.innerHTML = "💞 Okay... open it now — and don't cry 🥺";
      extraArea.innerHTML = "Loading the full surprise...";
      setTimeout(cb, 1800);
    }
  }, 1000);
}

/* next button handler */
nextBtn.addEventListener('click', ()=>{
  idx++;
  if (idx < slides.length) {
    renderSlide(idx);
  } else {
    // fallback redirect
    window.location.href = "https://tmehmoodmscs24seecs-ops.github.io/don-t-open-it/";
  }
});

/* initial render */
renderSlide(0);

/* ------------- YouTube music embed and control ------------- */
/* We'll use the IFrame API to create a hidden player that autoplays muted (works around autoplay policies),
   and provide a small control for user to enable sound. */
let ytPlayer;
const YT_VIDEO_ID = 'Umqb9KENgmk'; // your supplied ID
let musicEnabled = false;
const musicBtn = document.getElementById('musicToggle');
musicBtn.addEventListener('click', () => {
  if (!ytPlayer) {
    // create player if not ready
    createPlayerAndPlay();
    musicBtn.textContent = 'Unmute / Play';
    musicBtn.setAttribute('aria-pressed','true');
  } else {
    // toggle mute / unmute & play/pause
    if (musicEnabled) {
      ytPlayer.pauseVideo();
      musicBtn.textContent = 'Play Music';
      musicEnabled = false;
    } else {
      ytPlayer.unMute();
      ytPlayer.setVolume(22); // low volume
      ytPlayer.playVideo();
      musicBtn.textContent = 'Pause Music';
      musicEnabled = true;
    }
  }
});

/* YT API callback */
function createPlayerAndPlay(){
  // create hidden container
  const div = document.createElement('div');
  div.id = 'ytplayerwrap';
  div.style.position = 'fixed';
  div.style.width = '1px';
  div.style.height = '1px';
  div.style.left = '-9999px';
  document.body.appendChild(div);

  ytPlayer = new YT.Player(div, {
    height: '1', width: '1',
    videoId: YT_VIDEO_ID,
    playerVars: {
      autoplay: 1,
      controls: 0,
      disablekb: 1,
      loop: 1,
      modestbranding: 1,
      rel: 0,
      playsinline: 1,
      playlist: YT_VIDEO_ID,
      mute: 1
    },
    events: {
      onReady: (e) => {
        e.target.mute(); // start muted to satisfy autoplay rules
        e.target.setVolume(22);
        e.target.playVideo();
        // set a short delay and then unmute slightly if user already flagged
        // (we rely on user's click on musicBtn to unmute)
      }
    }
  });
}

/* ensure API loaded callback */
function onYouTubeIframeAPIReady(){
  // we don't auto-create the player until user interacts (musicBtn click)
  // This function is required by the API and will be called by the script
}

/* cleanup on unload */
window.addEventListener('beforeunload', ()=>{
  if (ytPlayer && ytPlayer.destroy) ytPlayer.destroy();
  clearInterval(emojiSpawnInterval);
});
</script>
</body>
</html>
